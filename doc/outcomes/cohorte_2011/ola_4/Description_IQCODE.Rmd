---
title: "Edad con Salud -- cohort 2011 -- wave 4 -- 'cognitive decline (IQCODE)'"
output:
  word_document:
   reference_docx: !expr ecs.data::get_pkg_docx_template()
bibliography: ../../../../www/Edad_con_salud_outcome_vars.bib 
csl: "`r ecs.data::get_proj_csl_file()`"
editor_options: 
  markdown:
    wrap: 80
params:
  test: true
  double-coding: false
---

```{r setup, include=FALSE}
# Activar los paquetes que R necesita para ejecutar el código:

library(Statamarkdown)

STATA_PATH <- r"(C:/Program Files (x86)/Stata15/StataSE-64.exe)"


options(width = 88) # Ancho de salida de texto en R

knitr::opts_chunk$set(
  echo        = FALSE, #   - No muestra la sintaxis en el documento
  results     = 'hide',#   - Omite los resultados de ejecutar la sintaxis
  cleanlog    = TRUE,  #   - Omite repetir sintaxis en resultados de Stata
  collectcode = TRUE,  #   - Reutiliza el código de Stata de 'chunks' anteriores
  comment     = ''     #   - No añade ningún prefijo a los resultados
)

TEST          <- params$test
DOUBLE_CODING <- params$`double-coding` & TEST
```

# Variable information

+---------------+----------------------------+---------------+---------------+
| Main variable | Label                      | Format        | Code          |
| name          |                            |               |               |
+:==============+:===========================+:==============+:==============+
| IQCODE_s3     | Cognitive decline level    | Categorial    | 1 = much      |
|               | (c2011_w4)                 |               | better        |
|               |                            |               |               |
|               |                            |               | 2 = a little  |
|               |                            |               | bit better    |
|               |                            |               |               |
|               |                            |               | 3 = no change |
|               |                            |               |               |
|               |                            |               | 4 = a little  |
|               |                            |               | bit worst     |
|               |                            |               |               |
|               |                            |               | 5 = much      |
|               |                            |               | worst         |
+---------------+----------------------------+---------------+---------------+

# Variable description

Cognitive decline refers to the impairment of cognitive functions such as memory
or information processing, to a greater extent than natural age-related decline.
It may appear suddenly or gradually and can be permanent or temporary
[@aarsland2017]. The IQCODE is a questionnaire which asks an informant about
changes in an elderly person's everyday cognitive function. The questionnaire
aims to assess cognitive decline independent of premorbid ability
[@forcanogarcía2002].

# Explanation of how the variables were created

We used Short Form of the Informant Questionnaire on Cognitive Decline including
16 questions about remember things about family (p1021_family_s3), recent events
(p1022_recent_s3), past conversations (p1023_recall_s3), personal infromations
(p1024_address_s3), localisation (p1025_day_s3), location of things
(p1026_kept_s3), find things (p1027_find_s3), use of household machines
(p1028_machin_s3), use of new gadget (p1029_gadget_s3), learn new things
(p1030_newthin_s3), read a book (p1031_book_s3), take decision
(p1032_decisio_s3), manege money (p1033_money_s3), finance (p1034_financial_s3),
daily arithmetic problems (p1035_other_s3 and p1036_reason_s3). Responses rage
from 1 (much improved) to 5 (much worse).

To score the IQCODE, we computed the mean of the 16 items by adding up the score
for each question and divide by the number of questions (16). The result is a
score that ranges from 1 to 5. An average score of 3 means that the subject is
rated as 'no change'. A score of 4 means 'a bit worse', and a score of 5 is
'much worse'.

# Syntax used to create the variable (Stata 15)

```{stata load-data}
* Cohorte 2011, ola 4:
use "~\UAM\Marta Miret Garcia - Bases de datos maestras Edad con Salud\Ola_4\Cohorte 2011\rawdata_c2011w4.dta"
```

```{stata generate-outcomes, echo=!DOUBLE_CODING}
foreach x in p1021_family_s3 p1022_recent_s3 p1023_recall_s3 p1024_address_s3 p1025_day_s3 p1026_kept_s3 p1027_find_s3 p1028_machin_s3 p1029_gadget_s3 p1030_newthin_s3 p1031_book_s3 p1032_decisio_s3 p1033_money_s3 p1034_financial_s3 p1035_other_s3 p1036_reason_s3 {
replace `x'=. if `x'>5
}
gen IQCODE_s3 = (p1021_family_s3 + p1022_recent_s3 + p1023_recall_s3 + p1024_address_s3 + p1025_day_s3 + p1026_kept_s3 + p1027_find_s3 + p1028_machin_s3 + p1029_gadget_s3 + p1030_newthin_s3 + p1031_book_s3 + p1032_decisio_s3 + p1033_money_s3 + p1034_financial_s3 + p1035_other_s3 + p1036_reason_s3) / 16

```

```{stata descriptives, cleanlog=FALSE, collectcode=FALSE, results='markup', include=!DOUBLE_CODING}
keep ID_ECS q0007a_result proxy IQCODE_s3

codebook IQCODE_s3
```

```{stata save-data-test, eval=TEST}
saveold "Outcome_IQCODE.dta", replace version(13)
```

```{stata save-data, eval=!TEST}

* Cohorte 2011, ola 4:
* saveold "~\UAM\Marta Miret Garcia - Documentacion Edad con Salud\Edad con salud - Ola 4\Outcomes\Cohorte 2011\Outcome datasets\Outcome_IQCODE.dta", replace version(13)

```

# Contact person:

<!--# TODO: Leer párrafo a continuación -->

Incluye tu nombre completo, correo electrónico, teléfono e institución a la que
perteneces. Si el algoritmo que has generado ha estado basado en el trabajo que
ya había hecho otro/a compañero/a, por favor, indícalo.

<!--# TODO: Borrar párrafo anterior -->

```{=html}
<!--# TODO: Completar '<Nombre y apellidos>', 'nombre.buzon@institucion.org>', y
'<prefijo>' y '<teléfono>' -->
```
-   Name: <Nombre y apellidos>
-   e-mail:
    [\<nombre.buzon\@institucion.org\>](mailto:nombre.buzon@institucion.org){.email}
-   Phone number: (+<prefijo>) <teléfono>

<br>

<!--# TODO: Completar / eliminar "original version" según corresponda -->

\< Original version:

-   Name: <Nombre y apellidos>
-   e-mail:
    [\<nombre.buzon\@institucion.org\>](mailto:nombre.buzon@institucion.org){.email}
-   Phone number: (+<prefijo>) <teléfono> \>

# References

::: {#refs}
:::

\newpage

# Session info

```{r, results='markup'}
devtools::session_info()
```
